$ cat Dockerfile                                                                                                                                                                                                                 
FROM golang:alpine AS build                                                                                            
                                                                                                                       
WORKDIR /go/src/bitbucket.org/albertogviana/go-microservice/names/                                                     
COPY . .                                                                                                               
                                                                                                                       
RUN apk update && \                                                                                                    
  apk add git &&\                                                                                                      
  go get gopkg.in/mgo.v2 && \                                                                                          
  go build -v -o names-demo                                                                                            
                                                                                                                       
                                                                                                                       
                                                                                                                       
FROM alpine                                                                                                            
                                                                                                                       
EXPOSE 8080                                                                                                            
                                                                                                                       
ENV APP_VERSION 1.0.0                                                                                                  
                                                                                                                       
COPY --from=build /go/src/bitbucket.org/albertogviana/go-microservice/names/names-demo /usr/local/bin/names-demo       
                                                                                                                       
RUN chmod +x /usr/local/bin/names-demo                                                                                 
                                                                                                                       
HEALTHCHECK --interval=10s CMD wget -qO- localhost:8080/health                                                         
                                                                                                                       
CMD ["names-demo"]                                                                                                     
          

Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-3/section-3.1/source/names (master)                                                                             
$ docker build -t sleyzezon/names-demo .                                                                                                                                         
Sending build context to Docker daemon  10.24kB                                                                                                                                  
Step 1/11 : FROM golang:alpine AS build                                                                                                                                          
alpine: Pulling from library/golang                                                                                                                                              
88286f41530e: Pull complete                                                                                                                                                      
3f27971ac235: Pull complete                                                                                                                                                      
d3324d2049d6: Pull complete                                                                                                                                                      
ca1727e0a894: Pull complete                                                                                                                                                      
905890d9f326: Pull complete                                                                                                                                                      
5323a74c388a: Pull complete                                                                                                                                                      
Digest: sha256:acbbbac5fdc7acda7f758b34807350ce691eb509ca64bd3c9f8af7a58438043d                                                                                                  
Status: Downloaded newer image for golang:alpine                                                                                                                                 
 ---> 107ed76bfbd2                                                                                                                                                               
Step 2/11 : WORKDIR /go/src/bitbucket.org/albertogviana/go-microservice/names/                                                                                                   
 ---> e5f838d25a67                                                                                                                                                               
Removing intermediate container 1b2d53694ef3                                                                                                                                     
Step 3/11 : COPY . .                                                                                                                                                             
 ---> 321e4bed9697                                                                                                                                                               
Step 4/11 : RUN apk update &&   apk add git &&  go get gopkg.in/mgo.v2 &&   go build -v -o names-demo                                                                            
 ---> Running in b3c33758a02f                                                                                                                                                    
fetch http://dl-cdn.alpinelinux.org/alpine/v3.6/main/x86_64/APKINDEX.tar.gz                                                                                                      
fetch http://dl-cdn.alpinelinux.org/alpine/v3.6/community/x86_64/APKINDEX.tar.gz                                                                                                 
v3.6.2-159-geb4330dc29 [http://dl-cdn.alpinelinux.org/alpine/v3.6/main]                                                                                                          
v3.6.2-156-g9136e1f1bd [http://dl-cdn.alpinelinux.org/alpine/v3.6/community]                                                                                                     
OK: 8441 distinct packages available                                                                                                                                             
(1/5) Installing libssh2 (1.8.0-r1)                                                                                                                                              
(2/5) Installing libcurl (7.56.0-r0)                                                                                                                                             
(3/5) Installing expat (2.2.0-r1)                                                                                                                                                
(4/5) Installing pcre (8.41-r0)                                                                                                                                                  
(5/5) Installing git (2.13.5-r0)                                                                                                                                                 
Executing busybox-1.26.2-r5.trigger                                                                                                                                              
OK: 25 MiB in 17 packages                                                                                                                                                        
bitbucket.org/albertogviana/go-microservice/names/models                                                                                                                         
bitbucket.org/albertogviana/go-microservice/names                                                                                                                                
 ---> fc70c7c05d2b                                                                                                                                                               
Removing intermediate container b3c33758a02f                                                                                                                                     
Step 5/11 : FROM alpine                                                                                                                                                          
latest: Pulling from library/alpine                                                                                                                                              
88286f41530e: Already exists                                                                                                                                                     
Digest: sha256:f006ecbb824d87947d0b51ab8488634bf69fe4094959d935c0c103f4820a417d                                                                                                  
Status: Downloaded newer image for alpine:latest                                                                                                                                 
 ---> 76da55c8019d                                                                                                                                                               
Step 6/11 : EXPOSE 8080                                                                                                                                                          
 ---> Running in 1369b1bb76d0                                                                                                                                                    
 ---> 4a9444cffdd4                                                                                                                                                               
Removing intermediate container 1369b1bb76d0                                                                                                                                     
Step 7/11 : ENV APP_VERSION 1.0.0                                                                                                                                                
 ---> Running in 2dcd44561413                                                                                                                                                    
 ---> 6cebc5b490da                                                                                                                                                               
Removing intermediate container 2dcd44561413                                                                                                                                     
Step 8/11 : COPY --from=build /go/src/bitbucket.org/albertogviana/go-microservice/names/names-demo /usr/local/bin/names-demo                                                     
 ---> d79ced237f0e                                                                                                                                                               
Step 9/11 : RUN chmod +x /usr/local/bin/names-demo                                                                                                                               
 ---> Running in e89fce6187a3                                                                                                                                                    
 ---> 0f4ac6da9072                                                                                                                                                               
Removing intermediate container e89fce6187a3                                                                                                                                     
Step 10/11 : HEALTHCHECK --interval=10s CMD wget -qO- localhost:8080/health                                                                                                      
 ---> Running in fcade01c2467                                                                                                                                                    
 ---> a1eebe077b6b                                                                                                                                                               
Removing intermediate container fcade01c2467                                                                                                                                     
Step 11/11 : CMD names-demo                                                                                                                                                      
 ---> Running in c2abd5c3f3e6                                                                                                                                                    
 ---> e98ed89983ac                                                                                                                                                               
Removing intermediate container c2abd5c3f3e6                                                                                                                                     
Successfully built e98ed89983ac                                                                                                                                                  
Successfully tagged sleyzezon/names-demo:latest                                                                                                                                  
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permiss
ons. It is recommended to double check and reset permissions for sensitive files and directories.                                                                                
                                                                                                                                                                                 
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-3/section-3.1/source/names (master)                                                                             
$ docker images                                                                                                                                                                  
REPOSITORY             TAG                 IMAGE ID            CREATED             SIZE                                                                                          
sleyzezon/names-demo   latest              e98ed89983ac        22 seconds ago      18.5MB                                                                                        
<none>                 <none>              fc70c7c05d2b        24 seconds ago      309MB                                                                                         
golang                 alpine              107ed76bfbd2        4 days ago          270MB                                                                                         
alpine                 latest              76da55c8019d        3 weeks ago         3.97MB                                                                                        
                                                                                                                                                                                 
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-3/section-3.1/source/names (master)                                                                             
$ docker push sleyzezon/names-demo                                                                                                                                               
The push refers to a repository [docker.io/sleyzezon/names-demo]                                                                                                                 
f9ab92b0ff64: Pushed                                                                                                                                                             
5bef08742407: Mounted from library/alpine                                                                                                                                        
latest: digest: sha256:47d8d3d9ba1a9d5b64307da8dea9249db2d19588ad034419b741758e2328c60e size: 950                                                                                
                                                                                                                                                                                 
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-3/section-3.1/source/names (master)                                                                             
$                                                                                                                                                                                
Repo created on docker hub: https://hub.docker.com/r/sleyzezon/names-demo/

                                                                                                                                                                                 