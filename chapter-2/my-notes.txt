
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                                                                         
$ cat create-machine.sh                                                                                                                                         
#!/bin/bash                                                                                                                                                     
                                                                                                                                                                
for i in 1 2 3; do                                                                                                                                              
    docker-machine create -d virtualbox swarm-$i                                                                                                                
done                                                                                                                                                            
                                                                                                                                                                
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                                                                         
$ ./create-machine.sh                                                                                                                                           
Running pre-create checks...                                                                                                                                    
(swarm-1) Default Boot2Docker ISO is out-of-date, downloading the latest release...                                                                             
(swarm-1) Latest release for github.com/boot2docker/boot2docker is v17.09.0-ce                                                                                  
(swarm-1) Downloading C:\Users\senya\.docker\machine\cache\boot2docker.iso from https://github.com/boot2docker/boot2docker/releases/download/v17.09.0-ce/boot2do
ker.iso...                                                                                                                                                      
(swarm-1) 0%....10%....20%....30%....40%....50%....60%....70%....80%....90%....100%                                                                             
Creating machine...                                                                                                                                             
(swarm-1) Copying C:\Users\senya\.docker\machine\cache\boot2docker.iso to C:\Users\senya\.docker\machine\machines\swarm-1\boot2docker.iso...                    
(swarm-1) Creating VirtualBox VM...                                                                                                                             
(swarm-1) Creating SSH key...                                                                                                                                   
(swarm-1) Starting the VM...                                                                                                                                    
(swarm-1) Check network to re-create if needed...                                                                                                               
(swarm-1) Waiting for an IP...                                                                                                                                  
Waiting for machine to be running, this may take a few minutes...                                                                                               
Detecting operating system of created instance...                                                                                                               
Waiting for SSH to be available...                                                                                                                              
Detecting the provisioner...                                                                                                                                    
Provisioning with boot2docker...                                                                                                                                
Copying certs to the local machine directory...                                                                                                                 
Copying certs to the remote machine...                                                                                                                          
Setting Docker configuration on the remote daemon...                                                                                                            
Checking connection to Docker...                                                                                                                                
Docker is up and running!                                                                                                                                       
To see how to connect your Docker Client to the Docker Engine running on this virtual machine, run: C:\Program Files\Docker Toolbox\docker-machine.exe env swarm
1                                                                                                                                                               
Running pre-create checks...                                                                                                                                    
Creating machine...                                                                                                                                             
(swarm-2) Copying C:\Users\senya\.docker\machine\cache\boot2docker.iso to C:\Users\senya\.docker\machine\machines\swarm-2\boot2docker.iso...                    
(swarm-2) Creating VirtualBox VM...                                                                                                                             
(swarm-2) Creating SSH key...                                                                                                                                   
(swarm-2) Starting the VM...                                                                                                                                    
(swarm-2) Check network to re-create if needed...                                                                                                               
(swarm-2) Waiting for an IP...                                                                                                                                  
Waiting for machine to be running, this may take a few minutes...                                                                                               
Detecting operating system of created instance...                                                                                                               
Waiting for SSH to be available...                                                                                                                              
Detecting the provisioner...                                                                                                                                    
Provisioning with boot2docker...                                                                                                                                
Copying certs to the local machine directory...                                                                                                                 
Copying certs to the remote machine...                                                                                                                          
Setting Docker configuration on the remote daemon...                                                                                                            
Checking connection to Docker...                                                                                                                                
Docker is up and running!                                                                                                                                       
To see how to connect your Docker Client to the Docker Engine running on this virtual machine, run: C:\Program Files\Docker Toolbox\docker-machine.exe env swarm
2                                                                                                                                                               
Running pre-create checks...                                                                                                                                    
Creating machine...                                                                                                                                             
(swarm-3) Copying C:\Users\senya\.docker\machine\cache\boot2docker.iso to C:\Users\senya\.docker\machine\machines\swarm-3\boot2docker.iso...                    
(swarm-3) Creating VirtualBox VM...                                                                                                                             
(swarm-3) Creating SSH key...                                                                                                                                   
(swarm-3) Starting the VM...                                                                                                                                    
(swarm-3) Check network to re-create if needed...                                                                                                               
(swarm-3) Waiting for an IP...                                                                                                                                  
Waiting for machine to be running, this may take a few minutes...                                                                                               
Detecting operating system of created instance...                                                                                                               
Waiting for SSH to be available...                                                                                                                              
Detecting the provisioner...                                                                                                                                    
Provisioning with boot2docker...                                                                                                                                
Copying certs to the local machine directory...                                                                                                                 
Copying certs to the remote machine...                                                                                                                          
Setting Docker configuration on the remote daemon...                                                                                                            
Checking connection to Docker...                                                                                                                                
Docker is up and running!                                                                                                                                       
To see how to connect your Docker Client to the Docker Engine running on this virtual machine, run: C:\Program Files\Docker Toolbox\docker-machine.exe env swarm
3                                                                                                                                                               
                                                                                                                                                                
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                                                                         
$ 

Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)
$ docker-machine ls
NAME      ACTIVE   DRIVER       STATE     URL                         SWARM   DOCKER        ERRORS
default   *        virtualbox   Running   tcp://192.168.99.100:2376           v17.07.0-ce
swarm-1   -        virtualbox   Running   tcp://192.168.99.105:2376           v17.09.0-ce
swarm-2   -        virtualbox   Running   tcp://192.168.99.106:2376           v17.09.0-ce
swarm-3   -        virtualbox   Running   tcp://192.168.99.107:2376           v17.09.0-ce


Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                                                                                                                                                                                       
$ eval "$(docker-machine env swarm-1)"                                                                          
                                                                                                                
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                         
$ docker-machine ls                                                                                             
NAME      ACTIVE   DRIVER       STATE     URL                         SWARM   DOCKER        ERRORS              
default   -        virtualbox   Running   tcp://192.168.99.100:2376           v17.07.0-ce                       
swarm-1   *        virtualbox   Running   tcp://192.168.99.105:2376           v17.09.0-ce                       
swarm-2   -        virtualbox   Running   tcp://192.168.99.106:2376           v17.09.0-ce                       
swarm-3   -        virtualbox   Running   tcp://192.168.99.107:2376           v17.09.0-ce                       
                                                                                                                
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                         

$ docker swarm init --advertise-addr $(docker-machine ip swarm-1)                                                                            
Swarm initialized: current node (yecar1k1724th4e6ws8msk07i) is now a manager.                                                                                                                                                                               
                                                                                                                                             
To add a worker to this swarm, run the following command:                                                                                    
                                                                                                                                             
    docker swarm join --token SWMTKN-1-0etn64puo2bv6fs9lw87fytk8sl8u8s7zxdd1l8plm7q6isj5l-9981lu2143cnxgofi7qgbhdei 192.168.99.105:2377      
                                                                                                                                             
To add a manager to this swarm, run 'docker swarm join-token manager' and follow the instructions.                                           
                                                                                                                                             
                                                                                                                                             
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                                                      
$                                        

Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)
$ docker swarm join-token manager
To add a manager to this swarm, run the following command:

    docker swarm join --token SWMTKN-1-0etn64puo2bv6fs9lw87fytk8sl8u8s7zxdd1l8plm7q6isj5l-9yuyeouk0g5r9nb0mym6wzvqx 192.168.99.105:2377

$ docker swarm join-token worker
To add a worker to this swarm, run the following command:

    docker swarm join --token SWMTKN-1-0etn64puo2bv6fs9lw87fytk8sl8u8s7zxdd1l8plm7q6isj5l-9981lu2143cnxgofi7qgbhdei 192.168.99.105:2377



$ JOIN_TOKEN=$(docker swarm join-token worker)                                                                                                                   	
                                                                                                                                                                 
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                                                                          
$ echo JOIN_TOKEN                                                                                                                                                
JOIN_TOKEN                                                                                                                                                       
                                                                                                                                                                 
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                                                                          
$ echo $JOIN_TOKEN                                                                                                                                               
To add a worker to this swarm, run the following command: docker swarm join --token SWMTKN-1-0etn64puo2bv6fs9lw87fytk8sl8u8s7zxdd1l8plm7q6isj5l-9981lu2143cnxgofi
7qgbhdei 192.168.99.105:2377                                                                                                                                     
                                                                                                                                                                 
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                                                                          
$ docker swarm join-token --help                                                                                                                                 
                                                                                                                                                                 
Usage:  docker swarm join-token [OPTIONS] (worker|manager)                                                                                                       
                                                                                                                                                                 
Manage join tokens                                                                                                                                               
                                                                                                                                                                 
Options:                                                                                                                                                         
      --help     Print usage                                                                                                                                     
  -q, --quiet    Only display token                                                                                                                              
      --rotate   Rotate join token                                                                                                                               
                                                                                                                                                                 
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                                                                          
$ JOIN_TOKEN=$(docker swarm join-token -q worker)                                                                                                                
                                                                                                                                                                 
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                                                                          
$ echo $JOIN_TOKEN                                                                                                                                               
SWMTKN-1-0etn64puo2bv6fs9lw87fytk8sl8u8s7zxdd1l8plm7q6isj5l-9981lu2143cnxgofi7qgbhdei                                                                            
                                                                                                                                                                 
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                                                                          
$                                                                                                                                                                
                                                                                                                                                                 
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                                                                                                                                                                                    
$ docker-machine ls                                                                                       
NAME      ACTIVE   DRIVER       STATE     URL                         SWARM   DOCKER        ERRORS        
default   -        virtualbox   Running   tcp://192.168.99.100:2376           v17.07.0-ce                 
swarm-1   *        virtualbox   Running   tcp://192.168.99.105:2376           v17.09.0-ce                 
swarm-2   -        virtualbox   Running   tcp://192.168.99.106:2376           v17.09.0-ce                 
swarm-3   -        virtualbox   Running   tcp://192.168.99.107:2376           v17.09.0-ce                 
                                                                                                          
Simeon@LAPTOP-P0PO4U7C MSYS ~/source/docker-swarm-course/chapter-2/section-2.2 (master)                   
$ docker node ls                                                                                          
ID                            HOSTNAME            STATUS              AVAILABILITY        MANAGER STATUS  
yecar1k1724th4e6ws8msk07i *   swarm-1             Ready               Active              Leader          
        
		